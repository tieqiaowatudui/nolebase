
---
type: 卡片
tags:
  - 算法
  - 2025年
  - 11月
  - 27号
  - 周4
  - 今年的第331天
date: 2025-11-27
week: 今年48周
--- 

# 结构
数组是在内存中分配一大块连续空间,存放相同类型的数据结构.是编程语言支持的默认的结构.



# 概念

## 数组的优点:
- call by rank.根据下标访问高效
- 内存空间使用效率高,除了存放数据外,没有额外空间消耗
- 局限性更好,由于数组是连续的,更容易被cpu的高速缓存预加载.获取到更好的硬件加速效率
## 数组的缺点:
- 插入数据需要大量移动数据
- 数组空间无法扩容,在初始化的时候就确定空间大小.
## 优化方式
对于插入需要移动大量的数据,无法优化,但是由于数组有更好的[[局部性原理]],所以会得到更好的移动效果.
对于无法扩展的缺点,有一种方式是动态数组.
就是对于数组进行动态扩容+移动数组的方式实现.
### 动态扩容
当在数组中插入数据,当遇到数组的上限的时候,这个时候将数组的大小翻倍,然后将旧数组中的数据copy到新数组中,然后释放旧数组的内存空间.
由于动态扩容涉及到大量的扩容和复制.看起来可能会性能消耗很大.但是[[#均摊分析]]效果是O(1)级别.
### 均摊分析
插入数据n(假设n是2的指数)个,这里设计到扩容的时候数据元素个数和复制元素的个数.
> 扩容的元素个数: 1 -> 2 -> 4 -> 8 -> ... -> n
> 复制元素个数:1 + 2 + 4 + 8 + ...+ n/2 = n -1

这里插入n个元素 和复制元素个数 (n - 1).
得出插入一个元素,平均移动和插入的复杂度为:
> (n + (n - 1) ) / n < 2 = O(1)

这里如果n不是 2的指数.计算复制元素的个数按照右边离n最近的2的指数来确定.
这里扩容和复制的数据带来的均摊复杂度已让是 O(1)级别的.
